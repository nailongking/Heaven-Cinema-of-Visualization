<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ÁñØÁãÇÂä®Áâ©Âüé‰∫∫Áâ©ÂÖ≥Á≥ªÂõæË∞±</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Segoe UI Emoji', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
            color: #333;
        }

       
        .header {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            pointer-events: none;
            z-index: 10;
        }

        h1 {
            margin: 0;
            font-size: 34px;
            font-weight: 800;
            color: #2d3436;
            text-shadow: 2px 2px 0px rgba(255,255,255,0.6);
            letter-spacing: 2px;
        }

        .legend {
            margin-top: 10px;
            display: flex;
            justify-content: center;
            gap: 15px;
            font-size: 13px;
            font-weight: bold;
            color: #555;
        }
        .legend-item { 
            display: flex; 
            align-items: center; 
            gap: 6px; 
            background: rgba(255,255,255,0.7); 
            padding: 6px 14px; 
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .dot { width: 12px; height: 12px; border-radius: 50%; }

      
        #chart {
            width: 100vw;
            height: 100vh;
        }

       
        .link {
            transition: all 0.2s ease-out; 
        }

       
        .link-label-group {
            transition: opacity 0.2s ease-out;
        }
        .link-label-bg {
            fill: #ffffff;
            stroke: #ccc;
            stroke-width: 1px;
            rx: 10px;
            ry: 10px;
            filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
            transition: stroke 0.2s;
        }
        .link-label {
            font-size: 11px;
            fill: #444;
            font-weight: bold;
            text-anchor: middle;
            dominant-baseline: middle;
            pointer-events: none;
        }

        
        .node {
            cursor: pointer;
            transition: opacity 0.2s ease-out;
        }
        .node-name {
            font-weight: bold;
            fill: #333;
            text-shadow: 0 1px 2px #fff;
            pointer-events: none;
        }

        
        .tooltip {
            position: absolute;
            background: rgba(255, 255, 255, 0.98);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            
           
            pointer-events: none; 
            
            opacity: 0;
            transition: opacity 0.15s ease-out; 
            max-width: 240px;
            z-index: 1000;
            font-size: 13px;
            border-left: 6px solid #ccc;
        }

    </style>
</head>
<body>

    <div class="header">
        <h1>ü¶ä ÁñØÁãÇÂä®Áâ©Âüé ¬∑ ËßíËâ≤ÁæÅÁªäÁΩë üê∞</h1>
        <div class="legend">
            <div class="legend-item"><div class="dot" style="background:#ff9f43"></div>‰∏ªËßí</div>
            <div class="legend-item"><div class="dot" style="background:#0984e3"></div>Ë≠¶Êñπ</div>
            <div class="legend-item"><div class="dot" style="background:#9c88ff"></div>ÊîøÁïå</div>
            <div class="legend-item"><div class="dot" style="background:#ff4757"></div>ÈªëÂ∏Æ</div>
            <div class="legend-item"><div class="dot" style="background:#00b894"></div>Â∏ÇÊ∞ë</div>
            <div class="legend-item"><div class="dot" style="background:#ff7675"></div>ÂÆ∂‰∫∫</div>
        </div>
    </div>

    <div id="chart"></div>
    <div id="tooltip" class="tooltip"></div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script>
       
        const data = {
            nodes: [
                { id: "Êú±Ëø™", emoji: "üê∞", group: "‰∏ªËßí", size: 65, desc: "Ê∞∏Ëøú‰πêËßÇÁöÑÂÖîÂ≠êË≠¶ÂÆò" },
                { id: "Â∞ºÂÖã", emoji: "ü¶ä", group: "‰∏ªËßí", size: 65, desc: "Áã°Áåæ‰ΩÜÂñÑËâØÁöÑÁãêÁã∏" },
                { id: "ÁâõÂ±ÄÈïø", emoji: "üêÉ", group: "Ë≠¶Êñπ", size: 50, desc: "Â§ñÂÜ∑ÂÜÖÁÉ≠ÁöÑË≠¶Â±Ä‰∏ÄÊääÊâã" },
                { id: "Ë±πË≠¶ÂÆò", emoji: "üêÜ", group: "Ë≠¶Êñπ", size: 45, desc: "ÂâçÂè∞Êé•ÂæÖÔºåÂñúÊ¨¢ÁîúÁîúÂúà" },
                { id: "È∫¶ÂÖãÊ†ºÊãâ", emoji: "ü¶è", group: "Ë≠¶Êñπ", size: 40, desc: "Âº∫Â£ÆÁöÑÁäÄÁâõË≠¶ÂÆò" },
                { id: "ÁãÆÂ∏ÇÈïø", emoji: "ü¶Å", group: "ÊîøÁïå", size: 50, desc: "‰∏∫‰∫ÜÂ§ßÂ±ÄÈöêÁûíÁúüÁõ∏" },
                { id: "ÁæäÂâØÂ∏ÇÈïø", emoji: "üêë", group: "ÊîøÁïå", size: 55, desc: "ÂπïÂêéÈªëÊâã" },
                { id: "ÈÅìÊ†º", emoji: "üêè", group: "ÊîøÁïå", size: 35, desc: "Âú∞‰∏ãÂà∂ÊØíÂ∏à" },
                { id: "Â§ßÂÖàÁîü", emoji: "üê≠", group: "ÈªëÂ∏Æ", size: 45, desc: "ÂÜªÂéüÈïáÊïôÁà∂(Èº©Èº±)" },
                { id: "Èú≤Èú≤", emoji: "üêÅ", group: "ÈªëÂ∏Æ", size: 40, desc: "Â§ßÂÖàÁîüÁöÑÂ•≥ÂÑø" },
                { id: "ÂåóÊûÅÁÜä", emoji: "üêª‚Äç‚ùÑÔ∏è", group: "ÈªëÂ∏Æ", size: 40, desc: "ÈªëÂ∏Æ‰øùÈïñ" },
                { id: "Èó™Áîµ", emoji: "ü¶•", group: "Â∏ÇÊ∞ë", size: 45, desc: "ËΩ¶ÁÆ°ÊâÄ...Âäû...‰∫ã...Âëò" },
                { id: "Â®ÅÊñØÈ°ø", emoji: "ü¶¶", group: "Â∏ÇÊ∞ë", size: 35, desc: "ÂçñÁõóÁâàÁ¢üÁöÑÈªÑÈº†Áãº" },
                { id: "Â••ÁâπÈ°øÂ§´‰∫∫", emoji: "ü¶¶", group: "Â∏ÇÊ∞ë", size: 35, desc: "ÂØªÊâæ‰∏àÂ§´ÁöÑÊ∞¥Áç≠" },
                { id: "Ëä¨Â∞ºÂÖã", emoji: "ü¶ä", group: "Â∏ÇÊ∞ë", size: 35, desc: "Ë£ÖÂÆùÂÆùËØàÈ™óÁöÑÊê≠Ê°£" },
                { id: "ÂêâËø™ÊÅ©", emoji: "ü¶ä", group: "Â∏ÇÊ∞ë", size: 30, desc: "ÂÑøÊó∂ÊÅ∂Èú∏ÔºåÂ∑≤ÂíåËß£" },
                { id: "Â§èÂ•áÁæä", emoji: "üé§", group: "Â∏ÇÊ∞ë", size: 50, desc: "ÂÖ®Ê∞ëÂÅ∂ÂÉè" },
                { id: "ÈÇ¶Â∞º", emoji: "üê∞", group: "ÂÆ∂‰∫∫", size: 30, desc: "Êú±Ëø™ÊØç‰∫≤" },
                { id: "ÊñØÂõæ", emoji: "üê∞", group: "ÂÆ∂‰∫∫", size: 30, desc: "Êú±Ëø™Áà∂‰∫≤" }
            ],
            links: [
                { source: "Êú±Ëø™", target: "Â∞ºÂÖã", label: "ÊúÄ‰Ω≥ÊãçÊ°£" },
                { source: "ÁâõÂ±ÄÈïø", target: "Êú±Ëø™", label: "‰∏ä‰∏ãÁ∫ß" },
                { source: "Ë±πË≠¶ÂÆò", target: "Êú±Ëø™", label: "Ëø∑Âºü" },
                { source: "Ë±πË≠¶ÂÆò", target: "ÁâõÂ±ÄÈïø", label: "‰∏ãÂ±û" },
                { source: "È∫¶ÂÖãÊ†ºÊãâ", target: "ÁâõÂ±ÄÈïø", label: "Âê¨ÂëΩ" },
                { source: "Â••ÁâπÈ°øÂ§´‰∫∫", target: "Êú±Ëø™", label: "ÂßîÊâòÂØªÊâæ" },
                { source: "Â∞ºÂÖã", target: "Èó™Áîµ", label: "ËÄÅÁõ∏ËØÜ" },
                { source: "Êú±Ëø™", target: "Â§ßÂÖàÁîü", label: "Ë¢´Êäì/Êä•ÊÅ©" },
                { source: "Èú≤Èú≤", target: "Êú±Ëø™", label: "ÊïëÂëΩÊÅ©‰∫∫" },
                { source: "Â§ßÂÖàÁîü", target: "Èú≤Èú≤", label: "Áà∂Â•≥" },
                { source: "Â§ßÂÖàÁîü", target: "Â∞ºÂÖã", label: "ÊóßÊÄ®" },
                { source: "Â§ßÂÖàÁîü", target: "ÂåóÊûÅÁÜä", label: "Èõá‰Ω£" },
                { source: "ÁæäÂâØÂ∏ÇÈïø", target: "ÁãÆÂ∏ÇÈïø", label: "Èô∑ÂÆ≥/ÁØ°‰Ωç" },
                { source: "ÁãÆÂ∏ÇÈïø", target: "ÁæäÂâØÂ∏ÇÈïø", label: "Èú∏Âáå" },
                { source: "ÁæäÂâØÂ∏ÇÈïø", target: "ÈÅìÊ†º", label: "Êåá‰ΩøÂà∂ÊØí" },
                { source: "ÁæäÂâØÂ∏ÇÈïø", target: "Êú±Ëø™", label: "Âà©Áî®" },
                { source: "Êú±Ëø™", target: "Â®ÅÊñØÈ°ø", label: "ÊäìÊçï" },
                { source: "Â®ÅÊñØÈ°ø", target: "ÈÅìÊ†º", label: "‰æõÂá∫Á∫øÁ¥¢" },
                { source: "Â∞ºÂÖã", target: "Ëä¨Â∞ºÂÖã", label: "ËØàÈ™óÊê≠Ê°£" },
                { source: "Êú±Ëø™", target: "ÂêâËø™ÊÅ©", label: "ÂíåËß£" },
                { source: "Ë±πË≠¶ÂÆò", target: "Â§èÂ•áÁæä", label: "ÁãÇÁÉ≠Á≤â" },
                { source: "Â§èÂ•áÁæä", target: "ÁâõÂ±ÄÈïø", label: "APPÂ•ΩÂèã" },
                { source: "ÈÇ¶Â∞º", target: "Êú±Ëø™", label: "ÊØçÂ•≥" },
                { source: "ÊñØÂõæ", target: "Êú±Ëø™", label: "Áà∂Â•≥" },
                { source: "ÊñØÂõæ", target: "ÈÇ¶Â∞º", label: "Â§´Â¶ª" }
            ]
        };

        const width = window.innerWidth;
        const height = window.innerHeight;

        const svg = d3.select("#chart").append("svg")
            .attr("width", width)
            .attr("height", height)
            .attr("viewBox", [0, 0, width, height])
           
            .on("click", resetHighlight);

       
        const colorScale = d3.scaleOrdinal()
            .domain(["‰∏ªËßí", "Ë≠¶Êñπ", "ÊîøÁïå", "ÈªëÂ∏Æ", "Â∏ÇÊ∞ë", "ÂÆ∂‰∫∫"])
            .range(["#ff9f43", "#0984e3", "#9c88ff", "#ff4757", "#00b894", "#ff7675"]);

        
        const simulation = d3.forceSimulation(data.nodes)
            .force("link", d3.forceLink(data.links).id(d => d.id).distance(180)) 
            .force("charge", d3.forceManyBody().strength(-600))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collide", d3.forceCollide().radius(d => d.size + 20));

        
        
        const link = svg.append("g")
            .selectAll("line")
            .data(data.links)
            .join("line")
            .attr("class", "link")
            .attr("stroke", "#666") 
            .attr("stroke-opacity", 0.6) 
            .attr("stroke-width", 1.5);

        const linkLabelGroup = svg.append("g")
            .selectAll("g")
            .data(data.links)
            .join("g")
            .attr("class", "link-label-group")
            .style("opacity", 1); 

        linkLabelGroup.append("rect")
            .attr("class", "link-label-bg")
            .attr("height", 20)
            .attr("rx", 10);

        const labelText = linkLabelGroup.append("text")
            .attr("class", "link-label")
            .text(d => d.label);
        
        labelText.each(function(d) {
            const bbox = this.getBBox();
            d3.select(this.parentNode).select("rect")
                .attr("width", bbox.width + 16)
                .attr("x", -bbox.width/2 - 8)
                .attr("y", -10);
        });

        const node = svg.append("g")
            .selectAll(".node")
            .data(data.nodes)
            .join("g")
            .attr("class", "node")
            .style("opacity", 1)
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        node.append("circle")
            .attr("r", d => d.size)
            .attr("fill", "#fff")
            .attr("stroke", d => colorScale(d.group))
            .attr("stroke-width", 4)
            .style("filter", "drop-shadow(0 4px 6px rgba(0,0,0,0.1))");

        node.append("text")
            .text(d => d.emoji)
            .attr("dy", "0.35em")
            .attr("text-anchor", "middle")
            .style("font-size", d => d.size + "px")
            .style("pointer-events", "none")
            .style("user-select", "none");

        node.append("text")
            .attr("class", "node-name")
            .text(d => d.id)
            .attr("y", d => d.size + 22)
            .attr("text-anchor", "middle")
            .style("font-size", "14px");

       
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            linkLabelGroup.attr("transform", d => {
                const x = (d.source.x + d.target.x) / 2;
                const y = (d.source.y + d.target.y) / 2;
                return `translate(${x}, ${y})`;
            });

            node.attr("transform", d => `translate(${d.x},${d.y})`);
        });

      
        const tooltip = d3.select("#tooltip");

       
        function resetHighlight() {
         
            node.style("opacity", 1)
                .transition().duration(200).attr("transform", d => `translate(${d.x},${d.y}) scale(1)`);
            
        
            link.style("opacity", 1)
                .attr("stroke", "#666")
                .attr("stroke-width", 1.5);

            
            linkLabelGroup.style("opacity", 1)
                .select("rect")
                .style("stroke", "#ccc")
                .style("stroke-width", 1);

            tooltip.style("opacity", 0);
        }

        node.on("mouseover", function(event, d) {
     
            event.stopPropagation();

           
            const neighborNodeIds = new Set();
            neighborNodeIds.add(d.id); 
            
            data.links.forEach(l => {
                if (l.source.id === d.id) neighborNodeIds.add(l.target.id);
                if (l.target.id === d.id) neighborNodeIds.add(l.source.id);
            });

         
            node.style("opacity", n => neighborNodeIds.has(n.id) ? 1 : 0.1);
            link.style("opacity", l => (l.source.id === d.id || l.target.id === d.id) ? 1 : 0.05);
            linkLabelGroup.style("opacity", l => (l.source.id === d.id || l.target.id === d.id) ? 1 : 0.05);

         
            link.filter(l => l.source.id === d.id || l.target.id === d.id)
                .attr("stroke", colorScale(d.group))
                .attr("stroke-width", 3);
          
            linkLabelGroup.filter(l => l.source.id === d.id || l.target.id === d.id)
                .select("rect")
                .style("stroke", colorScale(d.group))
                .style("stroke-width", 2);

            d3.select(this).transition().duration(200).attr("transform", `translate(${d.x},${d.y}) scale(1.15)`);

          
            tooltip.html(`
                <strong style="color:${colorScale(d.group)}; font-size:16px">${d.emoji} ${d.id}</strong>
                <div style="font-size:12px; margin:4px 0; color:#666">${d.group}</div>
                <div>${d.desc}</div>
            `)
            .style("left", (event.pageX + 20) + "px")
            .style("top", (event.pageY + 20) + "px")
            .style("border-left-color", colorScale(d.group))
            .style("opacity", 1);
        })
        .on("mouseout", function() {
        
            resetHighlight();
        });


        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
            d3.select(this).style("cursor", "grabbing");
        }
        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }
        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
            d3.select(this).style("cursor", "grab");
        }

    </script>
</body>
</html>